<!DOCTYPE html>
<!-- Latest compiled and minified CSS -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./hexdraw.css">
<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Oxygen+Mono' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300' rel='stylesheet' type='text/css'>

<!-- Latest compiled and minified JavaScript -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="./script/jquery.sticky.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://hammerjs.github.io/dist/hammer.js"></script>
<script>
    $(document).ready(function(){
        zoomFactor = 1.0
        bg = new HexBG(document.getElementById('x-canvas'), document.getElementById('x-canvas-bg'), 1600, 1600)
        bg.setTransform(zoomFactor, 0, 0);
        var handleScroll = function(evt){
			var delta = evt.wheelDelta ? evt.wheelDelta/1000 : evt.detail ? -evt.detail : 0;
            
			if (delta){
                zoomFactor = Math.max(zoomFactor + delta, 0.2);
                console.log(zoomFactor);
                bg.setTransform(zoomFactor, 0, 0);
            }
			return evt.preventDefault() && false;
		};
        canv = document.getElementById('x-canvas');
		canv.addEventListener('DOMMouseScroll',handleScroll,false);
		canv.addEventListener('mousewheel',handleScroll,false);
        //$('#x-canvas').css('width', 1600);
        //$('#x-canvas-bg').css('width', 1600);
        $('.color-purple').addClass("active");
        
        $( '.color-item' ).on('click', function() {
            if (!$(this).hasClass("active")){
                 $(this)
                    .addClass("active")
                    .siblings()
                        .removeClass("active")
                 var colorstr = $(this).css('background-color');
                 bg.setColor(colorstr);
            }
        });
        $( '.save-button' ).on('click', function() {
            var data = bg.getURL
            $(this).attr("href", data);
        })
    });
    
    
</script>
<head>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
</head>
<body>
    <div id="top"></div>
    <section class="intro">
        <canvas id='x-canvas-bg'></canvas>
        <canvas id='x-canvas'></canvas>
        <div class="logo smalllogo hidden-md hidden-lg">
            <span class="logo-text-front">hexdraw</span>
        </div>
        <div class="color-picker hidden-xs hidden-sm">
            <span class='color-red color-item'></span>
            <span class='color-blue color-item'></span>
            <span class='color-purple color-item'></span>
            <a class='save-button' target="_blank"><span class='fa fa-floppy-o utility-item'></span></a>
        </div>
        <div class="color-picker-mobile hidden-md hidden-lg">
            <span class='color-red color-item mobile'></span>
            <span class='color-blue color-item mobile'></span>
            <span class='color-purple color-item mobile'></span>
            <a class='save-button' target="_blank"><span class='fa fa-floppy-o utility-item mobile'></span></a>
        </div>
        <div class="logo biglogo hidden-xs hidden-sm">
            <span class="logo-text-front">hexdraw</span>
        </div></a>
    </section>
</body>
<script src="./script/xbackground.js"></script>
<script src="./script/hexBG.js"></script>
<script>
$("a[href^='#']").on('click', function(e){
    e.preventDefault();
    console.log('toot');
    var hash = this.hash;
    $('html, body').animate({
        scrollTop: $(hash).offset().top
    }, 500);
});
</script>